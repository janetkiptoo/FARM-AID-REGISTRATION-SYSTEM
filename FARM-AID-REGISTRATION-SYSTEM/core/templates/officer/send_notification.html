{% extends 'admin/base_site.html' %}
{% block content %}
<h2>Send SMS Notification</h2>

<form method="post">
  {% csrf_token %}
  <div style="margin-bottom: 1rem;">
    {{ form.recipient_type.label_tag }}<br>
    {{ form.recipient_type }}
  </div>

  <div id="phone-field" style="margin-bottom: 1rem;">
    {{ form.phone_number.label_tag }}<br>
    {{ form.phone_number }}
  </div>

  <div style="margin-bottom: 1rem;">
    {{ form.message.label_tag }}<br>
    {{ form.message }}
  </div>

  <button type="submit">Send Notification</button>
</form>

<script>
  // Hide phone number field when sending to all farmers
  const recipientField = document.querySelector("#id_recipient_type");
  const phoneField = document.querySelector("#phone-field");

  function togglePhoneField() {
    if (recipientField.value === "all") {
      phoneField.style.display = "none";
    } else {
      phoneField.style.display = "block";
    }
  }

  recipientField.addEventListener("change", togglePhoneField);
  togglePhoneField(); // Run on page load
</script>

{% endblock %}
